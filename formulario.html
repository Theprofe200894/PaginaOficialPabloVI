<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Formulario de Preinscripci√≥n - Escuela Particular Mixta Pablo VI</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Librer√≠a jsPDF para generar PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col items-center justify-start p-6">

  <!-- Logo y encabezado en la p√°gina, no en el PDF -->
  <header class="flex items-center gap-4 mb-8">
    <div class="w-16 h-16 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold text-xl select-none">
      <img src="logo.jpeg" alt="">
    </div>
    <h1 class="text-3xl font-bold text-indigo-700">Escuela Particular Mixta Pablo VI</h1>
  </header>

  <div class="bg-white rounded-xl shadow-lg p-8 max-w-4xl w-full overflow-auto">
    <h2 class="text-2xl font-bold text-indigo-700 mb-6 text-center">Formulario de Preinscripci√≥n</h2>

    <form id="preinscripcionForm" class="space-y-8">
      <!-- Informaci√≥n del Estudiante -->
      <fieldset class="border border-gray-300 rounded-md p-6">
        <legend class="text-indigo-700 font-bold text-xl mb-4">üîπ Informaci√≥n del Estudiante</legend>

        <div class="mb-4">
          <label for="estudianteNombre" class="block font-semibold mb-2">Nombres y apellidos completos</label>
          <input type="text" id="estudianteNombre" name="estudianteNombre" required class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="Ej: Juan P√©rez" />
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
          <div>
            <label for="estudianteFechaNacimiento" class="block font-semibold mb-2">Fecha de nacimiento</label>
            <input type="date" id="estudianteFechaNacimiento" name="estudianteFechaNacimiento" required class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" />
          </div>
          <div>
            <label for="estudianteEdad" class="block font-semibold mb-2">Edad</label>
            <input type="number" id="estudianteEdad" name="estudianteEdad" min="1" max="100" required class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="Ej: 12" />
          </div>
          <div>
            <label class="block font-semibold mb-2">G√©nero</label>
            <div class="flex gap-6 items-center">
              <label class="inline-flex items-center">
                <input type="radio" name="estudianteGenero" value="Masculino" required class="form-radio text-indigo-600" />
                <span class="ml-2">Masculino</span>
              </label>
              <label class="inline-flex items-center">
                <input type="radio" name="estudianteGenero" value="Femenino" required class="form-radio text-indigo-600" />
                <span class="ml-2">Femenino</span>
              </label>
            </div>
          </div>
        </div>

        <div class="mb-4">
          <label for="estudianteDireccion" class="block font-semibold mb-2">Direcci√≥n de residencia</label>
          <input type="text" id="estudianteDireccion" name="estudianteDireccion" required class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="Ej: Calle 123, Ciudad" />
        </div>

        <div class="mb-4">
          <label for="estudianteTelefono" class="block font-semibold mb-2">Tel√©fono de contacto (WhatsApp)</label>
          <input type="tel" id="estudianteTelefono" name="estudianteTelefono" class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="Ej: +51 987654321" />
        </div>

        <div>
          <label for="estudianteNivelGrado" class="block font-semibold mb-2">Nivel y grado al que desea ingresar</label>
          <select id="estudianteNivelGrado" name="estudianteNivelGrado" required class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600">
            <option value="" disabled selected>Seleccione nivel y grado</option>
            <optgroup label="Educaci√≥n Preprimaria">
              <option>K√≠nder (4‚Äì5 a√±os)</option>
              <option>Preparatoria (5‚Äì6 a√±os)</option>
            </optgroup>
            <optgroup label="Educaci√≥n Primaria (6 a√±os)">
              <option>Primero Primaria</option>
              <option>Segundo Primaria</option>
              <option>Tercero Primaria</option>
              <option>Cuarto Primaria</option>
              <option>Quinto Primaria</option>
              <option>Sexto Primaria</option>
            </optgroup>
            <optgroup label="Educaci√≥n Secundaria ‚Äì Nivel B√°sico (3 a√±os)">
              <option>Primero B√°sico</option>
              <option>Segundo B√°sico</option>
              <option>Tercero B√°sico</option>
            </optgroup>
          </select>
        </div>

        <div class="mt-4">
          <label class="inline-flex items-center">
            <input type="checkbox" id="cartaBuenaConducta" name="cartaBuenaConducta" class="form-checkbox text-indigo-600" />
            <span class="ml-2 font-semibold">Cuenta con Carta de buena conducta</span>
          </label>
        </div>
      </fieldset>

      <!-- Informaci√≥n del Padre, Madre o Encargado -->
      <fieldset class="border border-gray-300 rounded-md p-6">
        <legend class="text-indigo-700 font-bold text-xl mb-4">üîπ Informaci√≥n del Padre, Madre o Encargado</legend>

        <div class="mb-4">
          <label for="encargadoNombre" class="block font-semibold mb-2">Nombres y apellidos completos</label>
          <input type="text" id="encargadoNombre" name="encargadoNombre" required class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="Ej: Mar√≠a L√≥pez" />
        </div>

        <div class="mb-4">
          <label for="encargadoDPI" class="block font-semibold mb-2">N√∫mero de DPI</label>
          <input type="text" id="encargadoDPI" name="encargadoDPI" required class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="Ej: 1234567890101" />
        </div>

        <div class="mb-4">
          <label for="encargadoParentesco" class="block font-semibold mb-2">Parentesco con el estudiante</label>
          <select id="encargadoParentesco" name="encargadoParentesco" required class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600">
            <option value="" disabled selected>Seleccione</option>
            <option>Padre</option>
            <option>Madre</option>
            <option>Tutor</option>
            <option>Encargado legal</option>
          </select>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div>
            <label for="encargadoTelefonoCelular" class="block font-semibold mb-2">Tel√©fono celular</label>
            <input type="tel" id="encargadoTelefonoCelular" name="encargadoTelefonoCelular" class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="Ej: +51 987654321" />
          </div>
          <div>
            <label for="encargadoTelefonoCasa" class="block font-semibold mb-2">Tel√©fono casa</label>
            <input type="tel" id="encargadoTelefonoCasa" name="encargadoTelefonoCasa" class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="Ej: +51 1234567" />
          </div>
        </div>

        <div class="mb-4">
          <label for="encargadoDireccion" class="block font-semibold mb-2">Direcci√≥n de residencia (si es diferente a la del estudiante)</label>
          <input type="text" id="encargadoDireccion" name="encargadoDireccion" class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="Ej: Calle diferente 456, Ciudad" />
        </div>

        <div class="mb-4">
          <label for="encargadoEmail" class="block font-semibold mb-2">Correo electr√≥nico (si tiene)</label>
          <input type="email" id="encargadoEmail" name="encargadoEmail" class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" placeholder="ejemplo@correo.com" />
        </div>
      </fieldset>

      <button type="submit" class="w-full bg-indigo-600 text-white font-bold py-3 rounded-lg hover:bg-indigo-700 transition-colors btn-animate">
        Generar Comprobante PDF
      </button>
    </form>
  </div>

  <script>
    window.onload = () => {
      const { jsPDF } = window.jspdf;

      const form = document.getElementById('preinscripcionForm');

      form.addEventListener('submit', function(e) {
        e.preventDefault();

        // Obtener valores del formulario
        const estudianteNombre = form.estudianteNombre.value.trim();
        const estudianteFechaNacimiento = form.estudianteFechaNacimiento.value;
        const estudianteEdad = form.estudianteEdad.value.trim();
        const estudianteGenero = form.estudianteGenero.value || form.querySelector('input[name="estudianteGenero"]:checked')?.value;
        const estudianteDireccion = form.estudianteDireccion.value.trim();
        const estudianteTelefono = form.estudianteTelefono.value.trim() || 'No proporcionado';
        const estudianteNivelGrado = form.estudianteNivelGrado.value;
        const cartaBuenaConducta = form.cartaBuenaConducta.checked ? 'S√≠' : 'No';

        const encargadoNombre = form.encargadoNombre.value.trim();
        const encargadoDPI = form.encargadoDPI.value.trim();
        const encargadoParentesco = form.encargadoParentesco.value;
        const encargadoTelefonoCelular = form.encargadoTelefonoCelular.value.trim() || 'No proporcionado';
        const encargadoTelefonoCasa = form.encargadoTelefonoCasa.value.trim() || 'No proporcionado';
        const encargadoDireccion = form.encargadoDireccion.value.trim() || 'Igual que el estudiante';
        const encargadoEmail = form.encargadoEmail.value.trim() || 'No proporcionado';

        // Crear documento PDF tama√±o carta (8.5 x 11 pulgadas = 612 x 792 puntos)
        const doc = new jsPDF({
          unit: 'pt',
          format: 'letter'
        });

        const marginLeft = 40;
        const marginRight = 40;
        const pageWidth = 612;
        const maxWidth = pageWidth - marginLeft - marginRight;
        let y = 50;
        const lineHeight = 16;

        // T√≠tulo centrado
        doc.setFontSize(18);
        doc.setFont(undefined, 'bold');
        doc.setTextColor(0, 0, 0);
        doc.text('Comprobante de Preinscripci√≥n', pageWidth / 2, y, null, null, 'center');
        y += 30;

        // Funci√≥n para agregar texto con salto de l√≠nea autom√°tico
        const addText = (label, value) => {
          doc.setFont(undefined, 'bold');
          doc.setFontSize(12);
          doc.text(label + ':', marginLeft, y);
          y += lineHeight - 4;
          doc.setFont(undefined, 'normal');
          doc.setFontSize(11);
          const splitText = doc.splitTextToSize(value, maxWidth);
          doc.text(splitText, marginLeft, y);
          y += splitText.length * lineHeight;
          y += 6;
        };

        // Secci√≥n: Informaci√≥n del Estudiante (como t√≠tulo simple sin iconos)
        doc.setFontSize(14);
        doc.setFont(undefined, 'bold');
        doc.text('Informaci√≥n del Estudiante', marginLeft, y);
        y += lineHeight + 6;

        addText('Nombres y apellidos completos', estudianteNombre);
        addText('Fecha de nacimiento', new Date(estudianteFechaNacimiento).toLocaleDateString('es-PE'));
        addText('Edad', estudianteEdad);
        addText('G√©nero', estudianteGenero);
        addText('Direcci√≥n de residencia', estudianteDireccion);
        addText('Tel√©fono de contacto (WhatsApp)', estudianteTelefono);
        addText('Nivel y grado al que desea ingresar', estudianteNivelGrado);
        addText('Cuenta con Carta de buena conducta', cartaBuenaConducta);

        // Secci√≥n: Informaci√≥n del Padre, Madre o Encargado (como t√≠tulo simple)
        doc.setFontSize(14);
        doc.setFont(undefined, 'bold');
        doc.text('Informaci√≥n del Padre, Madre o Encargado', marginLeft, y);
        y += lineHeight + 6;

        addText('Nombres y apellidos completos', encargadoNombre);
        addText('N√∫mero de DPI', encargadoDPI);
        addText('Parentesco con el estudiante', encargadoParentesco);

        // Tel√©fonos de contacto sin salto de l√≠nea problem√°tico
        doc.setFont(undefined, 'bold');
        doc.setFontSize(12);
        doc.text('Tel√©fonos de contacto:', marginLeft, y);
        y += lineHeight - 4;
        doc.setFont(undefined, 'normal');
        doc.setFontSize(11);

        const telefonos = [
          `Celular: ${encargadoTelefonoCelular}`,
          `Casa: ${encargadoTelefonoCasa}`
        ];

        telefonos.forEach(line => {
          const splitLine = doc.splitTextToSize(line, maxWidth);
          doc.text(splitLine, marginLeft + 15, y);
          y += splitLine.length * lineHeight;
        });
        y += 6;

        addText('Direcci√≥n de residencia', encargadoDireccion);
        addText('Correo electr√≥nico', encargadoEmail);

        // Nota final
        y += 10;
        doc.setFontSize(10);
        doc.setFont(undefined, 'normal');
        const nota = 'Este comprobante es v√°lido para el proceso de inscripci√≥n en la Escuela Particular Mixta Pablo VI.';
        const splitNota = doc.splitTextToSize(nota, maxWidth);
        doc.text(splitNota, marginLeft, y);

        // Firma simulada
        y += splitNota.length * lineHeight + 30;
        doc.setDrawColor(0);
        doc.setLineWidth(0.5);
        doc.line(marginLeft, y, marginLeft + 120, y);
        doc.text('Firma del responsable', marginLeft, y + 14);

        // Fecha de emisi√≥n
        const fechaEmision = new Date().toLocaleDateString('es-PE');
        doc.text(`Fecha de emisi√≥n: ${fechaEmision}`, pageWidth - marginRight - 150, y + 14);

        // Guardar PDF
        const nombreArchivo = `Comprobante_Preinscripcion_${estudianteNombre.replace(/\s+/g, '_')}.pdf`;
        doc.save(nombreArchivo);
      });
    };
  </script>

</body>
</html>
